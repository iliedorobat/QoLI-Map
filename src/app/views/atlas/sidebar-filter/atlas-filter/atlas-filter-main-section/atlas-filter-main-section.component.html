<mat-form-field [formGroup]="form">
    <mat-label>Year of analysis</mat-label>
    <mat-select
        formControlName="year"
        (selectionChange)="onYearChanges($event)"
        [(value)]="filter.baseFilter.year"
    >
        <mat-option
            *ngFor="let year of AVAILABLE_INTERVAL"
            [value]="year"
        >{{ year }}</mat-option>
    </mat-select>
</mat-form-field>

<mat-form-field [formGroup]="form">
    <mat-label>Countries</mat-label>

    <mat-select formControlName="countries" multiple (selectionChange)="onCountriesChanges($event)" [value]="selectedCountries">
        <mat-select-trigger>
            {{ selectedCountries.length }} selected countries
        </mat-select-trigger>

        <mat-option *ngFor="let countryCode of EU28_MEMBER_CODES" [value]="countryCode">
            <div>{{ getCountryName(countryCode) }}</div>
        </mat-option>
    </mat-select>
</mat-form-field>

<!-- TODO: revisit: radio buttons: 1) multiple selection; 2) simple selection -->
<!-- TODO: revisit: https://material.angular.io/components/tree/overview -->
<mat-form-field [formGroup]="form">
    <mat-label>Quality of Life Index</mat-label>

    <mat-select multiple (selectionChange)="onFeaturesChanges($event)" [value]="selectedFeatures">
        <mat-select-trigger>
            {{ selectedFeatures.length }} selected features
        </mat-select-trigger>

        <div class="qoli-features-group" *ngFor="let dimension of filter.baseFilter.qoliOptions.aggregators">
            <mat-option class="qoli-dimension" [value]="dimension.filename">
                <mat-checkbox
                    [formControlName]="dimension.filename"
                    [checked]="dimension.checked"
                    [indeterminate]="someIndicatorsChecked(dimension)"
                    (change)="onDimensionChanges(dimension)"
                >{{ dimension.label }}</mat-checkbox>
            </mat-option>

            <mat-option
                class="qoli-indicators"
                *ngFor="let indicator of dimension.aggregators"
                [value]="dimension.filename + ':' + indicator.filename"
            >
                <mat-checkbox
                    [formControlName]="dimension.filename + ':' + indicator.filename"
                    [checked]="indicator.checked"
                    (change)="onIndicatorChanges(dimension, indicator)"
                >{{ indicator.label }}</mat-checkbox>
            </mat-option>
        </div>
    </mat-select>
</mat-form-field>
