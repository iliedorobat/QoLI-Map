<div class="global-filter">
    <button [ngClass]="{'btn btn-counter': true, disabled: true}">
        Results: {{ atlasFilter.form.get('countries')?.value?.length }} countries
    </button>

    <form class="needs-validation" [formGroup]="atlasFilter.form">
        <ngb-accordion activeIds="atlas-filter-analysis-type-section">
            <ngb-panel id="atlas-filter-analysis-type-section">
                <ng-template ngbPanelTitle>
                    <div class="title">
                        Analysis Type Filter
                    </div>
                    <button class="btn btn-link btn-reset-section" (click)="onSectionReset($event)">
                        Reset
                    </button>
                </ng-template>
                <ng-template ngbPanelContent>
                    <app-atlas-filter-analysis-type-section></app-atlas-filter-analysis-type-section>
                </ng-template>
            </ngb-panel>
        </ngb-accordion>

        <ngb-accordion activeIds="atlas-filter-aggregated-section">
            <ngb-panel id="atlas-filter-aggregated-section">
                <ng-template ngbPanelTitle>
                    <div class="title">
                        Aggregated Filter
                    </div>
                    <button class="btn btn-link btn-reset-section" (click)="onSectionReset($event)">
                        Reset
                    </button>
                </ng-template>
                <ng-template ngbPanelContent>
                    <app-atlas-filter-aggregated-section></app-atlas-filter-aggregated-section>
                </ng-template>
            </ngb-panel>
        </ngb-accordion>

        <div class="form-footer">
            <button class="btn btn-md btn-success" type="submit" (click)="onFilterApply()" [disabled]="atlasFilter.isDisabled()">
                Apply Filter
            </button>
            <button class="btn btn-md btn-secondary" type="submit" (click)="onReset()">
                Reset Filter
            </button>
        </div>
    </form>
</div>
